function show_contact(e){$("#show_contact"+e).empty(),$("#contact"+e).fadeIn(700),$.get("/batches/increment/"+e,function(){})}function refreshForm(e){$(e)[0].reset(),$(e).bootstrapValidator("resetForm",!0)}function hideMembershipMessage(){var e=new Date;e.setTime(e.getTime()+36e5),$.cookie("membeshipMessageStatus","hide",{expires:e,path:"/"})}function validateReviewForm(){return $("#comment_rating").val()<1?($(".reviewInstituteName .ratingInput").append("<div id='statusMessage'>Please Sumbit Your Rating</div>"),!1):!0}$(function(){"hide"!=$.cookie("membeshipMessageStatus")&&$(".membership_message").show()}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){function t(e){return o.raw?e:encodeURIComponent(e)}function a(e){return o.raw?e:decodeURIComponent(e)}function n(e){return t(o.json?JSON.stringify(e):String(e))}function r(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(l," ")),o.json?JSON.parse(e):e}catch(t){}}function i(t,a){var n=o.raw?t:r(t);return e.isFunction(a)?a(n):n}var l=/\+/g,o=e.cookie=function(r,l,s){if(arguments.length>1&&!e.isFunction(l)){if(s=e.extend({},o.defaults,s),"number"==typeof s.expires){var c=s.expires,u=s.expires=new Date;u.setMilliseconds(u.getMilliseconds()+864e5*c)}return document.cookie=[t(r),"=",n(l),s.expires?"; expires="+s.expires.toUTCString():"",s.path?"; path="+s.path:"",s.domain?"; domain="+s.domain:"",s.secure?"; secure":""].join("")}for(var g=r?void 0:{},d=document.cookie?document.cookie.split("; "):[],h=0,p=d.length;p>h;h++){var m=d[h].split("="),f=a(m.shift()),v=m.join("=");if(r===f){g=i(v,l);break}r||void 0===(v=i(v))||(g[f]=v)}return g};o.defaults={},e.removeCookie=function(t,a){return e.cookie(t,"",e.extend({},a,{expires:-1})),!e.cookie(t)}}),!function(e){"use strict";String.prototype.replaceAll=function(e,t){return this.split(e).join(t)};var t=0,a=5,n=.5,r=function(t,a){return null===t||void 0===t||0===t.length||a&&""===e.trim(t)},i=function(e,t){e.removeClass(t).addClass(t)},l=function(e,t,a){var n=r(e.data(t))?e.attr(t):e.data(t);return n?n:a[t]},o=function(e){var t=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0},s=function(e,t){return parseFloat(e.toFixed(t))},c=function(t,a){this.$element=e(t),this.init(a)};c.prototype={constructor:c,_parseAttr:function(e,i){var o=this,s=o.$element;if("range"===s.attr("type")||"number"===s.attr("type")){var c,u,g=l(s,e,i);switch(e){case"min":c=t;break;case"max":c=a;break;default:c=n}return u=r(g)?c:g,parseFloat(u)}return parseFloat(i[e])},listenClick:function(e,t){e.on("click touchstart",function(e){return $("#statusMessage").remove(),e.stopPropagation(),e.preventDefault(),e.handled===!0?!1:(t(e),void(e.handled=!0))})},setDefault:function(e,t){var a=this;r(a[e])&&(a[e]=t)},getPosition:function(e){var t=e.pageX||e.originalEvent.touches[0].pageX;return t-this.$rating.offset().left},listen:function(){var t,a,n=this;n.initTouch(),n.listenClick(n.$rating,function(e){return n.inactive?!1:(t=n.getPosition(e),n.setStars(t),n.$element.trigger("change").trigger("rating.change",[n.$element.val(),n.$caption.html()]),void(n.starClicked=!0))}),n.$rating.on("mousemove",function(e){n.hoverEnabled&&!n.inactive&&(n.starClicked=!1,t=n.getPosition(e),a=n.calculate(t),n.toggleHover(a),n.$element.trigger("rating.hover",[a.val,a.caption,"stars"]))}),n.$rating.on("mouseleave",function(){!n.hoverEnabled||n.inactive||n.starClicked||(a=n.cache,n.toggleHover(a),n.$element.trigger("rating.hoverleave",["stars"]))}),n.$clear.on("mousemove",function(){if(n.hoverEnabled&&!n.inactive&&n.hoverOnClear){n.clearClicked=!1;var e='<span class="'+n.clearCaptionClass+'">'+n.clearCaption+"</span>",t=n.clearValue,r=n.getWidthFromValue(t);a={caption:e,width:r,val:t},n.toggleHover(a),n.$element.trigger("rating.hover",[t,e,"clear"])}}),n.$clear.on("mouseleave",function(){n.hoverEnabled&&!n.inactive&&!n.clearClicked&&n.hoverOnClear&&(a=n.cache,n.toggleHover(a),n.$element.trigger("rating.hoverleave",["clear"]))}),n.listenClick(n.$clear,function(){n.inactive||(n.clear(),n.clearClicked=!0)}),e(n.$element[0].form).on("reset",function(){n.inactive||n.reset()})},destroy:function(){var t=this,a=t.$element;r(t.$container)||t.$container.before(a).remove(),e.removeData(a.get(0)),a.off("rating").removeClass("hide")},create:function(e){var t=this,a=t.$element;e=e||t.options||{},t.destroy(),a.rating(e)},setTouch:function(e,t){var a=this,n="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch;if(n&&!a.inactive){var r=e.originalEvent,i=r.touches||r.changedTouches,l=a.getPosition(i[0]);if(t)a.setStars(l),a.$element.trigger("change").trigger("rating.change",[a.$element.val(),a.$caption.html()]),a.starClicked=!0;else{var o=a.calculate(l),s=o.val<=a.clearValue?a.fetchCaption(a.clearValue):o.caption,c=a.getWidthFromValue(a.clearValue),u=o.val<=a.clearValue?a.rtl?100-c+"%":c+"%":o.width;a.$caption.html(s),a.$stars.css("width",u)}}},initTouch:function(){var e=this;e.$rating.on("touchstart touchmove touchend",function(t){var a="touchend"===t.type;e.setTouch(t,a)})},initSlider:function(e){var i=this;r(i.$element.val())&&i.$element.val(0),i.initialValue=i.$element.val(),i.setDefault("min",i._parseAttr("min",e)),i.setDefault("max",i._parseAttr("max",e)),i.setDefault("step",i._parseAttr("step",e)),(isNaN(i.min)||r(i.min))&&(i.min=t),(isNaN(i.max)||r(i.max))&&(i.max=a),(isNaN(i.step)||r(i.step)||0===i.step)&&(i.step=n),i.diff=i.max-i.min},init:function(t){var a,n,l,o=this,s=o.$element;o.options=t,e.each(t,function(e,t){o[e]=t}),o.starClicked=!1,o.clearClicked=!1,o.initSlider(t),o.checkDisabled(),o.setDefault("rtl",s.attr("dir")),o.rtl&&s.attr("dir","rtl"),a=o.glyphicon?"":"★",o.setDefault("symbol",a),o.setDefault("clearButtonBaseClass","clear-rating"),o.setDefault("clearButtonActiveClass","clear-rating-active"),o.setDefault("clearValue",o.min),i(s,"form-control hide"),o.$clearElement=r(t.clearElement)?null:e(t.clearElement),o.$captionElement=r(t.captionElement)?null:e(t.captionElement),void 0===o.$rating&&void 0===o.$container&&(o.$rating=e(document.createElement("div")).html('<div class="rating-stars"></div>'),o.$container=e(document.createElement("div")),o.$container.before(o.$rating).append(o.$rating),s.before(o.$container).appendTo(o.$rating)),o.$stars=o.$rating.find(".rating-stars"),o.generateRating(),o.$clear=r(o.$clearElement)?o.$container.find("."+o.clearButtonBaseClass):o.$clearElement,o.$caption=r(o.$captionElement)?o.$container.find(".caption"):o.$captionElement,o.setStars(),o.listen(),o.showClear&&o.$clear.attr({"class":o.getClearClass()}),n=s.val(),l=o.getWidthFromValue(n),o.cache={caption:o.$caption.html(),width:(o.rtl?100-l:l)+"%",val:n},s.removeClass("rating-loading")},checkDisabled:function(){var e=this;e.disabled=l(e.$element,"disabled",e.options),e.readonly=l(e.$element,"readonly",e.options),e.inactive=e.disabled||e.readonly},getClearClass:function(){return this.clearButtonBaseClass+" "+(this.inactive?"":this.clearButtonActiveClass)},generateRating:function(){var e=this,t=e.renderClear(),a=e.renderCaption(),n=e.rtl?"rating-container-rtl":"rating-container",l=e.getStars();n+=e.glyphicon?(""===e.symbol?" rating-gly-star":" rating-gly")+e.ratingClass:r(e.ratingClass)?" rating-uni":" "+e.ratingClass,e.$rating.attr("class",n),e.$rating.attr("data-content",l),e.$stars.attr("data-content",l),n=e.rtl?"star-rating-rtl":"star-rating",e.$container.attr("class",n+" rating-"+e.size),e.$container.removeClass("rating-active rating-disabled"),e.$container.addClass(e.inactive?"rating-disabled":"rating-active"),r(e.$caption)&&(e.rtl?e.$container.prepend(a):e.$container.append(a)),r(e.$clear)&&(e.rtl?e.$container.append(t):e.$container.prepend(t)),r(e.containerClass)||i(e.$container,e.containerClass)},getStars:function(){var e,t=this,a=t.stars,n="";for(e=1;a>=e;e++)n+=t.symbol;return n},renderClear:function(){var e,t=this;return t.showClear?(e=t.getClearClass(),r(t.$clearElement)?'<div class="'+e+'" title="'+t.clearButtonTitle+'">'+t.clearButton+"</div>":(i(t.$clearElement,e),t.$clearElement.attr({title:t.clearButtonTitle}).html(t.clearButton),"")):""},renderCaption:function(){var e,t=this,a=t.$element.val();return t.showCaption?(e=t.fetchCaption(a),r(t.$captionElement)?'<div class="caption">'+e+"</div>":(i(t.$captionElement,"caption"),t.$captionElement.html(e),"")):""},fetchCaption:function(e){var t,a,n,i,l,o=this,s=parseFloat(e),c=o.starCaptions,u=o.starCaptionClasses;return i="function"==typeof u?u(s):u[s],n="function"==typeof c?c(s):c[s],a=r(n)?o.defaultCaption.replaceAll("{rating}",s):n,t=r(i)?o.clearCaptionClass:i,l=s===o.clearValue?o.clearCaption:a,'<span class="'+t+'">'+l+"</span>"},getWidthFromValue:function(e){var t=this,a=t.min,n=t.max;return a>=e||a===n?0:e>=n?100:100*(e-a)/(n-a)},getValueFromPosition:function(e){var t,a,n=this,r=o(n.step),i=n.$rating.width();return a=n.diff*e/(i*n.step),a=n.rtl?Math.floor(a):Math.ceil(a),t=s(parseFloat(n.min+a*n.step),r),t=Math.max(Math.min(t,n.max),n.min),n.rtl?n.max-t:t},toggleHover:function(e){var t,a,n,r=this;r.hoverChangeCaption&&(n=e.val<=r.clearValue?r.fetchCaption(r.clearValue):e.caption,r.$caption.html(n)),r.hoverChangeStars&&(t=r.getWidthFromValue(r.clearValue),a=e.val<=r.clearValue?r.rtl?100-t+"%":t+"%":e.width,r.$stars.css("width",a))},calculate:function(e){var t=this,a=r(t.$element.val())?0:t.$element.val(),n=arguments.length?t.getValueFromPosition(e):a,i=t.fetchCaption(n),l=t.getWidthFromValue(n);return t.rtl&&(l=100-l),l+="%",{caption:i,width:l,val:n}},setStars:function(e){var t=this,a=arguments.length?t.calculate(e):t.calculate();t.$element.val(a.val),t.$stars.css("width",a.width),t.$caption.html(a.caption),t.cache=a},clear:function(){var e=this,t='<span class="'+e.clearCaptionClass+'">'+e.clearCaption+"</span>";e.$stars.removeClass("rated"),e.inactive||e.$caption.html(t),e.$element.val(e.clearValue),e.setStars(),e.$element.trigger("rating.clear")},reset:function(){var e=this;e.$element.val(e.initialValue),e.setStars(),e.$element.trigger("rating.reset")},update:function(e){var t=this;arguments.length&&(t.$element.val(e),t.setStars())},refresh:function(t){var a=this;arguments.length&&(a.$rating.off("rating"),void 0!==a.$clear&&a.$clear.off(),a.init(e.extend(a.options,t)),a.showClear?a.$clear.show():a.$clear.hide(),a.showCaption?a.$caption.show():a.$caption.hide(),a.$element.trigger("rating.refresh"))}},e.fn.rating=function(t){var a=Array.apply(null,arguments);return a.shift(),this.each(function(){var n=e(this),r=n.data("rating"),i="object"==typeof t&&t;r||n.data("rating",r=new c(this,e.extend({},e.fn.rating.defaults,i,e(this).data()))),"string"==typeof t&&r[t].apply(r,a)})},e.fn.rating.defaults={stars:5,glyphicon:!0,symbol:null,ratingClass:"",disabled:!1,readonly:!1,rtl:!1,size:"md",showClear:!0,showCaption:!0,defaultCaption:"{rating} Stars",starCaptions:{.5:"Half Star",1:"Hated It",1.5:"One & Half Star",2:"Didn't Like It",2.5:"Two & Half Stars",3:"Just OK",3.5:"Three & Half Stars",4:"Liked It",4.5:"Four & Half Stars",5:"Loved It"},starCaptionClasses:{.5:"label label-danger",1:"label label-danger",1.5:"label label-warning",2:"label label-warning",2.5:"label label-info",3:"label label-info",3.5:"label label-primary",4:"label label-primary",4.5:"label label-success",5:"label label-success"},clearButton:'<i class="glyphicon glyphicon-minus-sign"></i>',clearButtonTitle:"Clear",clearButtonBaseClass:"clear-rating",clearButtonActiveClass:"clear-rating-active",clearCaption:"Not Rated",clearCaptionClass:"label label-default",clearValue:null,captionElement:null,clearElement:null,containerClass:null,hoverEnabled:!0,hoverChangeCaption:!0,hoverChangeStars:!0,hoverOnClear:!0},e.fn.rating.Constructor=c,e("input.rating").addClass("rating-loading"),e(document).ready(function(){var t=e("input.rating"),a=Object.keys(t).length;a>0&&t.rating()})}(window.jQuery);
$(document).ready(function () {				
	$( "#reviewForm" ).submit(function( e ) {		  
		e.preventDefault();
		if(validateReviewForm())
		{
			var $form = $(this),
			csrfToken = $form.find( "input[name='csrf_token']" ).val(),
			instituteID = $form.find( "input[name='comment_institute_id']" ).val(),
			rating = $form.find( "input[name='comment_rating']" ).val(),
			comment = $form.find( "textarea[name='comment']" ).val(),
			url = $form.attr( "action" );
			var submitForm = $.post( url, { csrf_token: csrfToken, comment_institute_id:instituteID,
			 comment_rating:rating,comment:comment } );			 
			submitForm.done(function( data ) {
				// alert(data);				 				
			});
			$('#reviewModal').modal('hide');
		}		
	});		
});	